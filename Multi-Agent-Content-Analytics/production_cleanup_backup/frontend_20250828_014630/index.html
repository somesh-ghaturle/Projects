<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Multi-Agent Content Analytics - Professional UI</title>
    <style>
        /* Common styles for all themes */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            transition: all 0.3s ease;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 100%;
            margin: 0;
            padding: 0;
            min-height: 100vh;
        }
        
        .theme-switcher {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            display: flex;
            align-items: center;
        }
        
        .theme-switcher select {
            padding: 8px 12px;
            border-radius: 4px;
            font-size: 14px;
            border: none;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            background-color: rgba(255,255,255,0.9);
            backdrop-filter: blur(5px);
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 30px;
            border-radius: 10px;
        }
        
        .header {
            text-align: center;
            padding: 30px 0;
        }
        
        h1 {
            margin-bottom: 10px;
        }
        
        .section {
            margin-bottom: 30px;
            padding: 20px;
            border-radius: 8px;
        }
        
        .section h2 {
            margin-top: 0;
            margin-bottom: 15px;
        }
        
        textarea {
            width: 100%;
            min-height: 150px;
            padding: 15px;
            border-radius: 5px;
            font-family: monospace;
            font-size: 14px;
            resize: vertical;
            box-sizing: border-box;
        }
        
        select, button {
            padding: 10px 20px;
            margin: 10px 5px 10px 0;
            border-radius: 5px;
            font-size: 16px;
        }
        
        button {
            cursor: pointer;
            transition: all 0.3s;
        }
        
        button:disabled {
            cursor: not-allowed;
            opacity: 0.7;
        }
        
        .results {
            margin-top: 20px;
            padding: 15px;
            border-radius: 5px;
            white-space: pre-wrap;
            font-family: monospace;
            font-size: 14px;
            max-height: 400px;
            overflow-y: auto;
        }
        
        .status {
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
        }
        
        .quick-examples {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        
        .example-card {
            padding: 15px;
            border-radius: 5px;
            cursor: pointer;
            transition: transform 0.2s;
        }
        
        .example-card:hover {
            transform: translateY(-5px);
        }

        .api-status {
            text-align: center;
            margin-bottom: 20px;
        }
        
        .results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        
        .result-card {
            padding: 15px;
            border-radius: 8px;
        }
        
        .result-card h4 {
            margin: 0 0 10px 0;
        }
        
        .result-card p {
            margin: 5px 0;
            line-height: 1.4;
        }
        
        /* Netflix theme */
        .netflix-theme {
            background-color: #141414;
            color: #e5e5e5;
        }
        
        .netflix-theme .container {
            background-color: #181818;
            box-shadow: 0 4px 20px rgba(0,0,0,0.4);
        }
        
        .netflix-theme h1 {
            color: #e50914;
        }
        
        .netflix-theme .section {
            background-color: #222;
            border: 1px solid #333;
        }
        
        .netflix-theme .section h2 {
            color: #e50914;
        }
        
        .netflix-theme textarea {
            background-color: #333;
            color: #fff;
            border: 1px solid #444;
        }
        
        .netflix-theme select {
            background-color: #333;
            color: #fff;
            border: 1px solid #444;
        }
        
        .netflix-theme button {
            background-color: #e50914;
            color: white;
            border: none;
        }
        
        .netflix-theme button:hover {
            background-color: #f40612;
        }
        
        .netflix-theme button:disabled {
            background-color: #5c0408;
        }
        
        .netflix-theme .results {
            background-color: #333;
            color: #fff;
        }
        
        .netflix-theme .example-card {
            background-color: #333;
            border: 1px solid #444;
        }
        
        .netflix-theme .example-card:hover {
            box-shadow: 0 0 15px rgba(229, 9, 20, 0.4);
        }

        .netflix-theme .result-card {
            background-color: #333;
            border: 1px solid #444;
        }
        
        /* Amazon Prime theme */
        .prime-theme {
            background-color: #0f171e;
            color: #fff;
        }
        
        .prime-theme .container {
            background-color: #1a242f;
            box-shadow: 0 4px 20px rgba(0,0,0,0.4);
        }
        
        .prime-theme h1 {
            color: #00a8e1;
        }
        
        .prime-theme .section {
            background-color: #19212c;
            border: 1px solid #2a3543;
        }
        
        .prime-theme .section h2 {
            color: #00a8e1;
        }
        
        .prime-theme textarea {
            background-color: #2a3543;
            color: #fff;
            border: 1px solid #3a4553;
        }
        
        .prime-theme select {
            background-color: #2a3543;
            color: #fff;
            border: 1px solid #3a4553;
        }
        
        .prime-theme button {
            background-color: #00a8e1;
            color: white;
            border: none;
        }
        
        .prime-theme button:hover {
            background-color: #0dbdf6;
        }
        
        .prime-theme button:disabled {
            background-color: #0a526e;
        }
        
        .prime-theme .results {
            background-color: #2a3543;
            color: #fff;
        }
        
        .prime-theme .example-card {
            background-color: #2a3543;
            border: 1px solid #3a4553;
        }
        
        .prime-theme .example-card:hover {
            box-shadow: 0 0 15px rgba(0, 168, 225, 0.4);
        }

        .prime-theme .result-card {
            background-color: #2a3543;
            border: 1px solid #3a4553;
        }
        
        /* HBO Max theme */
        .hbo-theme {
            background-color: #0c0527;
            color: #fff;
        }
        
        .hbo-theme .container {
            background-color: #1b0a4a;
            box-shadow: 0 4px 20px rgba(0,0,0,0.4);
        }
        
        .hbo-theme h1 {
            color: #c539b4;
        }
        
        .hbo-theme .section {
            background-color: #241460;
            border: 1px solid #36198a;
        }
        
        .hbo-theme .section h2 {
            color: #c539b4;
        }
        
        .hbo-theme textarea {
            background-color: #36198a;
            color: #fff;
            border: 1px solid #4f27bd;
        }
        
        .hbo-theme select {
            background-color: #36198a;
            color: #fff;
            border: 1px solid #4f27bd;
        }
        
        .hbo-theme button {
            background-color: #c539b4;
            color: white;
            border: none;
        }
        
        .hbo-theme button:hover {
            background-color: #e73fc9;
        }
        
        .hbo-theme button:disabled {
            background-color: #6a2460;
        }
        
        .hbo-theme .results {
            background-color: #36198a;
            color: #fff;
        }
        
        .hbo-theme .example-card {
            background-color: #36198a;
            border: 1px solid #4f27bd;
        }
        
        .hbo-theme .example-card:hover {
            box-shadow: 0 0 15px rgba(197, 57, 180, 0.4);
        }

        .hbo-theme .result-card {
            background-color: #36198a;
            border: 1px solid #4f27bd;
        }
        
        /* Hulu theme */
        .hulu-theme {
            background-color: #0b1622;
            color: #fff;
        }
        
        .hulu-theme .container {
            background-color: #111b29;
            box-shadow: 0 4px 20px rgba(0,0,0,0.4);
        }
        
        .hulu-theme h1 {
            color: #1ce783;
        }
        
        .hulu-theme .section {
            background-color: #1a2c40;
            border: 1px solid #234060;
        }
        
        .hulu-theme .section h2 {
            color: #1ce783;
        }
        
        .hulu-theme textarea {
            background-color: #234060;
            color: #fff;
            border: 1px solid #2e5279;
        }
        
        .hulu-theme select {
            background-color: #234060;
            color: #fff;
            border: 1px solid #2e5279;
        }
        
        .hulu-theme button {
            background-color: #1ce783;
            color: #0b1622;
            font-weight: bold;
            border: none;
        }
        
        .hulu-theme button:hover {
            background-color: #22ff92;
        }
        
        .hulu-theme button:disabled {
            background-color: #0e7141;
            color: #ddd;
        }
        
        .hulu-theme .results {
            background-color: #234060;
            color: #fff;
        }
        
        .hulu-theme .example-card {
            background-color: #234060;
            border: 1px solid #2e5279;
        }
        
        .hulu-theme .example-card:hover {
            box-shadow: 0 0 15px rgba(28, 231, 131, 0.4);
        }

        .hulu-theme .result-card {
            background-color: #234060;
            border: 1px solid #2e5279;
        }
        
        /* Disney+ theme */
        .disney-theme {
            background-color: #111d3b;
            color: #fff;
        }
        
        .disney-theme .container {
            background-color: #1a2d5f;
            box-shadow: 0 4px 20px rgba(0,0,0,0.4);
        }
        
        .disney-theme h1 {
            color: #ffffff;
            text-shadow: 0 0 10px #40a9ff;
        }
        
        .disney-theme .section {
            background-color: #213770;
            border: 1px solid #2a4384;
        }
        
        .disney-theme .section h2 {
            color: #40a9ff;
        }
        
        .disney-theme textarea {
            background-color: #2a4384;
            color: #fff;
            border: 1px solid #355099;
        }
        
        .disney-theme select {
            background-color: #2a4384;
            color: #fff;
            border: 1px solid #355099;
        }
        
        .disney-theme button {
            background-color: #40a9ff;
            color: white;
            border: none;
        }
        
        .disney-theme button:hover {
            background-color: #69c0ff;
        }
        
        .disney-theme button:disabled {
            background-color: #1f5287;
        }
        
        .disney-theme .results {
            background-color: #2a4384;
            color: #fff;
        }
        
        .disney-theme .example-card {
            background-color: #2a4384;
            border: 1px solid #355099;
        }
        
        .disney-theme .example-card:hover {
            box-shadow: 0 0 15px rgba(64, 169, 255, 0.4);
        }

        .disney-theme .result-card {
            background-color: #2a4384;
            border: 1px solid #355099;
        }
    </style>
</head>

<body class="netflix-theme">
    <div class="theme-switcher">
        <select id="theme-selector">
            <option value="netflix-theme">Netflix</option>
            <option value="prime-theme">Amazon Prime</option>
            <option value="hbo-theme">HBO Max</option>
            <option value="hulu-theme">Hulu</option>
            <option value="disney-theme">Disney+</option>
        </select>
    </div>

    <div class="container">
        <div class="header">
            <h1>🎬 Multi-Agent Content Analytics</h1>
            <p>Professional AI-powered script analysis and content intelligence</p>
        </div>

        <!-- API Status -->
        <div class="api-status">
            <button onclick="checkApiStatus()">Check API Status</button>
            <div id="apiStatus"></div>
        </div>

        <!-- Content Analysis Section -->
        <div class="section">
            <h2>📝 Analyze Your Content with AI Agents</h2>
            <div>
                <label for="contentInput"><strong>Enter your movie script or content:</strong></label>
                <textarea id="contentInput" placeholder="Paste your movie script, story, or any content here...

Example:
FADE IN:

EXT. SPACESHIP - DAY

The massive starship hovers above Earth. Captain Sarah looks out the window at her home planet one last time before the journey to Mars begins.

SARAH
This is it. No turning back now.

The engines ignite with a brilliant blue flame."></textarea>
            </div>
            
            <div>
                <label for="agentSelect"><strong>Choose AI Agent:</strong></label>
                <select id="agentSelect">
                    <option value="script_summarizer">📝 Script Summarizer - Extract scenes, characters, themes</option>
                    <option value="genre_classifier">🎯 Genre Classifier - Identify genre, mood, audience</option>
                    <option value="marketing_agent">📈 Marketing Agent - Get marketing strategy & insights</option>
                </select>
                
                <button onclick="analyzeWithAgent()" id="analyzeAgentBtn">🚀 Analyze with Agent</button>
            </div>

            <div id="agentResults"></div>
        </div>

        <!-- Quick Examples -->
        <div class="section">
            <h2>🚀 Quick Examples</h2>
            <p>Click on any example below to try it:</p>
            
            <div class="quick-examples">
                <div class="example-card" onclick="loadExample('scifi')">
                    <h4>🛸 Sci-Fi Script</h4>
                    <p>Space exploration and alien contact</p>
                </div>
                
                <div class="example-card" onclick="loadExample('romance')">
                    <h4>💕 Romance Script</h4>
                    <p>Coffee shop meet-cute scene</p>
                </div>
                
                <div class="example-card" onclick="loadExample('action')">
                    <h4>🔥 Action Script</h4>
                    <p>High-stakes chase sequence</p>
                </div>
                
                <div class="example-card" onclick="loadExample('horror')">
                    <h4>👻 Horror Script</h4>
                    <p>Mysterious haunted house</p>
                </div>
            </div>
        </div>

        <!-- Available Agents -->
        <div class="section">
            <h2>🤖 Available AI Agents</h2>
            <button onclick="getAgents()">Load Available Agents</button>
            <div id="agentsResults"></div>
        </div>

        <!-- API Documentation -->
        <div class="section">
            <h2>📖 API Endpoints</h2>
            <div style="font-family: monospace; padding: 15px; border-radius: 5px;">
                <strong>Base URL:</strong> http://localhost:8001<br><br>
                <strong>GET /</strong> - API status<br>
                <strong>GET /health</strong> - Health check<br>
                <strong>GET /agents</strong> - List available agents<br>
                <strong>POST /analyze</strong> - Analyze content<br>
            </div>
        </div>
    </div>

    <script>
        const API_URL = 'http://localhost:8001';

        // Example content
        const examples = {
            scifi: `FADE IN:

EXT. MARS COLONY - DAY

The red planet stretches endlessly. COMMANDER ALEX (40s) stands at the observation deck, watching Earth rise over the Martian horizon.

ALEX
(into comm device)
Mission Control, we've detected something unusual. There are structures here that predate human arrival.

A shadow moves across the ancient alien ruins in the distance.

FADE OUT.`,

            romance: `INT. COFFEE SHOP - MORNING

SARAH (28) sits alone, typing on her laptop. JAMES (30) approaches nervously with two coffee cups.

JAMES
Excuse me, I couldn't help but notice you're writing something. I'm a writer too.

SARAH
(looking up, smiling)
Really? What do you write?

Their eyes meet. Something magical happens.`,

            action: `EXT. CITY ROOFTOP - NIGHT

AGENT CARTER sprints across rooftops, bullets whizzing past. The helicopter searchlight sweeps the area.

CARTER
(into earpiece)
Package secured. Need immediate extraction!

Carter leaps between buildings as explosions light up the night sky behind them.

CARTER (CONT'D)
This mission just went sideways!`,

            horror: `INT. ABANDONED MANSION - NIGHT

The floorboards creak as JENNY (20s) slowly climbs the dusty staircase. Her flashlight flickers ominously.

JENNY
(whispering)
Hello? Is anyone there?

A door slams shut somewhere in the darkness. The temperature drops noticeably.

JENNY (CONT'D)
(voice trembling)
I shouldn't have come here alone.

A child's laughter echoes from the walls.`
        };

        async function checkApiStatus() {
            const statusDiv = document.getElementById('apiStatus');
            try {
                const response = await fetch(`${API_URL}/`);
                const data = await response.json();
                statusDiv.innerHTML = `<div class="status success">✅ API is running: ${data.message}</div>`;
            } catch (error) {
                statusDiv.innerHTML = `<div class="status error">❌ API not accessible. Make sure Docker container is running.</div>`;
            }
        }

        async function analyzeWithAgent() {
            const content = document.getElementById('contentInput').value.trim();
            const selectedAgent = document.getElementById('agentSelect').value;
            const resultsDiv = document.getElementById('agentResults');
            const analyzeBtn = document.getElementById('analyzeAgentBtn');

            if (!content) {
                alert('Please enter some content to analyze!');
                return;
            }

            analyzeBtn.disabled = true;
            analyzeBtn.textContent = '🔄 Analyzing...';
            
            try {
                const response = await fetch(`${API_URL}/agent/${selectedAgent}`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        content: content,
                        agent_name: selectedAgent
                    })
                });

                const data = await response.json();
                
                if (response.ok) {
                    resultsDiv.innerHTML = formatAgentResults(data);
                } else {
                    resultsDiv.innerHTML = `<div class="status error">Error: ${data.detail || 'Analysis failed'}</div>`;
                }
            } catch (error) {
                resultsDiv.innerHTML = `<div class="status error">Error: ${error.message}</div>`;
            } finally {
                analyzeBtn.disabled = false;
                analyzeBtn.textContent = '🚀 Analyze with Agent';
            }
        }

        function formatAgentResults(data) {
            const agent = data.agent;
            const results = data.results;
            
            let formattedHTML = `
                <h3>🤖 ${agent.replace('_', ' ').toUpperCase()} Results</h3>
                <div class="status success">✅ Analysis completed in ${data.processing_time || 0}ms</div>
                <div class="results-grid">
            `;

            if (agent === 'script_summarizer') {
                // Handle script summarizer results
                const characters = results.characters || [];
                const scenes = results.scenes || [];
                const themes = results.themes || [];
                
                formattedHTML += `
                    <div class="result-card">
                        <h4>📊 Script Overview</h4>
                        <p><strong>Summary:</strong> ${results.summary || 'No summary available'}</p>
                        <p><strong>Word Count:</strong> ${results.word_count || 'N/A'}</p>
                        <p><strong>Estimated Runtime:</strong> ${results.estimated_runtime || 'N/A'}</p>
                    </div>
                    <div class="result-card">
                        <h4>🎭 Characters</h4>
                        ${characters.length > 0 ? 
                            characters.slice(0, 5).map(char => 
                                `<p><strong>${char.name || char}:</strong> ${char.description || ''}</p>`
                            ).join('') 
                            : '<p>No clear character names detected</p>'}
                    </div>
                    <div class="result-card">
                        <h4>🏠 Scene Analysis</h4>
                        ${scenes.length > 0 ? 
                            scenes.slice(0, 5).map(scene => 
                                `<p><strong>${scene.setting || scene}:</strong> ${scene.description || ''}</p>`
                            ).join('')
                            : '<p>No scene headers detected</p>'}
                    </div>
                `;
            } else if (agent === 'genre_classifier') {
                // Handle genre classifier results
                const genres = results.genre_confidence || {};
                const targetAudience = results.target_audience || 'General audience';
                
                formattedHTML += `
                    <div class="result-card">
                        <h4>🎯 Genre Classification</h4>
                        <p><strong>Primary Genre:</strong> ${results.primary_genre || 'Unknown'}</p>
                    </div>
                    <div class="result-card">
                        <h4>🔍 Genre Confidence</h4>
                        ${Object.entries(genres).length > 0 ? 
                            Object.entries(genres).map(([genre, confidence]) => {
                                const percentage = Math.round(confidence * 100);
                                return `
                                    <p><strong>${genre}:</strong> ${percentage}%</p>
                                    <div style="background-color: #444; height: 10px; border-radius: 5px; margin-top: 5px; margin-bottom: 10px;">
                                        <div style="background-color: var(--accent-color, #e50914); height: 100%; border-radius: 5px; width: ${percentage}%;"></div>
                                    </div>
                                `;
                            }).join('')
                            : '<p>No genre confidence data available</p>'}
                    </div>
                    <div class="result-card">
                        <h4>👥 Target Audience</h4>
                        <p>${targetAudience}</p>
                    </div>
                `;
            } else if (agent === 'marketing_agent') {
                // Handle marketing agent results
                const hooks = results.marketing_hooks || [];
                const taglines = results.taglines || [];
                const platforms = results.platforms || {};
                
                formattedHTML += `
                    <div class="result-card">
                        <h4>🎯 Target Audience</h4>
                        <p>${results.target_audience || 'No target audience specified'}</p>
                    </div>
                    <div class="result-card">
                        <h4>💡 Marketing Hooks</h4>
                        ${hooks.length > 0 ? 
                            '<ul>' + hooks.map(hook => `<li>${hook}</li>`).join('') + '</ul>'
                            : '<p>No marketing hooks generated</p>'}
                    </div>
                    <div class="result-card">
                        <h4>📣 Suggested Taglines</h4>
                        ${taglines.length > 0 ? 
                            '<ul>' + taglines.map(tagline => `<li>${tagline}</li>`).join('') + '</ul>'
                            : '<p>No taglines generated</p>'}
                    </div>
                    <div class="result-card">
                        <h4>📱 Recommended Platforms</h4>
                        ${Object.entries(platforms).length > 0 ? 
                            Object.entries(platforms).map(([platform, score]) => {
                                const percentage = Math.round(score * 100);
                                return `
                                    <p><strong>${platform}:</strong> ${percentage}%</p>
                                    <div style="background-color: #444; height: 10px; border-radius: 5px; margin-top: 5px; margin-bottom: 10px;">
                                        <div style="background-color: var(--accent-color, #e50914); height: 100%; border-radius: 5px; width: ${percentage}%;"></div>
                                    </div>
                                `;
                            }).join('')
                            : '<p>No platform recommendations available</p>'}
                    </div>
                `;
            } else {
                // Generic handler for any other agents
                formattedHTML += `
                    <div class="result-card">
                        <h4>🔍 Analysis Results</h4>
                        <pre>${JSON.stringify(results, null, 2)}</pre>
                    </div>
                `;
            }
            
            formattedHTML += `</div>`;
            return formattedHTML;
        }

        function toggleRawResults() {
            const rawResults = document.getElementById('rawResults');
            const toggleBtn = document.getElementById('toggleBtn');
            
            if (rawResults.style.display === 'none') {
                rawResults.style.display = 'block';
                toggleBtn.textContent = 'Hide';
            } else {
                rawResults.style.display = 'none';
                toggleBtn.textContent = 'Show';
            }
        }

        async function getAgents() {
            const resultsDiv = document.getElementById('agentsResults');
            
            try {
                const response = await fetch(`${API_URL}/agents`);
                const data = await response.json();
                
                if (response.ok && data.agents) {
                    let agentsHTML = '<h3>🤖 Available Agents</h3><div class="results">';
                    // Convert agents object to array and iterate
                    Object.values(data.agents).forEach(agent => {
                        agentsHTML += `<strong>${agent.name}</strong>: ${agent.description} (v${agent.version})\n`;
                    });
                    agentsHTML += '</div>';
                    resultsDiv.innerHTML = agentsHTML;
                } else {
                    resultsDiv.innerHTML = `<div class="status error">Could not load agents</div>`;
                }
            } catch (error) {
                resultsDiv.innerHTML = `<div class="status error">Error: ${error.message}</div>`;
            }
        }

        function loadExample(type) {
            document.getElementById('contentInput').value = examples[type];
        }

        // Theme selection handling
        const themeSelector = document.getElementById('theme-selector');
        const body = document.body;
        
        // Check if there's a saved theme preference
        const savedTheme = localStorage.getItem('preferredTheme') || 'netflix-theme';
        body.className = savedTheme;
        themeSelector.value = savedTheme;
        
        themeSelector.addEventListener('change', function() {
            const selectedTheme = themeSelector.value;
            body.className = selectedTheme;
            localStorage.setItem('preferredTheme', selectedTheme);
            updateAccentColor();
        });
        
        // Set theme-specific accent colors for charts/graphs
        function updateAccentColor() {
            const theme = body.className;
            let accentColor = '#e50914'; // Netflix default
            
            if (theme === 'prime-theme') accentColor = '#00a8e1';
            else if (theme === 'hbo-theme') accentColor = '#c539b4';
            else if (theme === 'hulu-theme') accentColor = '#1ce783';
            else if (theme === 'disney-theme') accentColor = '#40a9ff';
            
            document.documentElement.style.setProperty('--accent-color', accentColor);
        }
        
        // Update accent color on page load
        updateAccentColor();

        // Check API status on page load
        document.addEventListener('DOMContentLoaded', function() {
            checkApiStatus();
            updateAccentColor();
        });
    </script>
</body>
</html>
